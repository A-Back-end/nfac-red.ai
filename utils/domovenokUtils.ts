/**
 * Utilities for Domovenok AI Assistant
 * Helper functions, constants, and formatting utilities
 */

export interface DomovenokRole {
  id: string
  name: string
  emoji: string
  description: string
  specialization: string
}

export interface DomovenokStyle {
  id: string
  name: string
  emoji: string
  description: string
}

export interface QuickQuestion {
  category: string
  icon: string
  questions: string[]
}

// –†–æ–ª–∏ –î–æ–º–æ–≤—ë–Ω–∫–∞
export const DOMOVENOK_ROLES: DomovenokRole[] = [
  {
    id: 'realtor',
    name: '–†–∏–µ–ª—Ç–æ—Ä',
    emoji: 'üè†',
    description: '–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ–∫—É–ø–∫–µ, –ø—Ä–æ–¥–∞–∂–µ –∏ –æ—Ü–µ–Ω–∫–µ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏',
    specialization: 'realtor'
  },
  {
    id: 'interior_designer',
    name: '–î–∏–∑–∞–π–Ω–µ—Ä –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞',
    emoji: 'üé®',
    description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω–µ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É—é—Ç–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—å–µ—Ä–æ–≤',
    specialization: 'designer'
  },
  {
    id: 'renovation_expert',
    name: '–≠–∫—Å–ø–µ—Ä—Ç –ø–æ —Ä–µ–º–æ–Ω—Ç—É',
    emoji: 'üî®',
    description: '–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –±—é–¥–∂–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Ä–µ–º–æ–Ω—Ç–∞',
    specialization: 'consultant'
  },
  {
    id: 'investment_advisor',
    name: '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç',
    emoji: 'üí∞',
    description: '–°–æ–≤–µ—Ç–Ω–∏–∫ –ø–æ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–º –≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å',
    specialization: 'consultant'
  },
  {
    id: 'universal',
    name: '–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç',
    emoji: 'üèÜ',
    description: '–í—Å–µ –≤ –æ–¥–Ω–æ–º: —Ä–∏–µ–ª—Ç–æ—Ä + –¥–∏–∑–∞–π–Ω–µ—Ä + –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç',
    specialization: 'consultant'
  }
]

// –°—Ç–∏–ª–∏ –æ–±—â–µ–Ω–∏—è
export const COMMUNICATION_STYLES: DomovenokStyle[] = [
  {
    id: 'friendly',
    name: '–î—Ä—É–∂–µ–ª—é–±–Ω—ã–π',
    emoji: 'üòä',
    description: '–¢–µ–ø–ª–æ–µ, –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ —Å —ç–º–æ–¥–∑–∏'
  },
  {
    id: 'professional',
    name: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π',
    emoji: 'üíº',
    description: '–î–µ–ª–æ–≤–æ–π, —á–µ—Ç–∫–∏–π —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è'
  },
  {
    id: 'expert',
    name: '–≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π',
    emoji: 'üéì',
    description: '–ì–ª—É–±–æ–∫–∏–µ –∑–Ω–∞–Ω–∏—è —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –¥–µ—Ç–∞–ª—è–º–∏'
  },
  {
    id: 'casual',
    name: '–ü—Ä–æ—Å—Ç–æ–π',
    emoji: 'üëã',
    description: '–ü—Ä–æ—Å—Ç–æ–π —è–∑—ã–∫, –ª–µ–≥–∫–∏–π –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è'
  }
]

// –ë—ã—Å—Ç—Ä—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
export const QUICK_QUESTIONS: QuickQuestion[] = [
  {
    category: '–ü–æ–∫—É–ø–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã',
    icon: 'üè†',
    questions: [
      '–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É –¥–ª—è –ø–æ–∫—É–ø–∫–∏?',
      '–ù–∞ —á—Ç–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∫–≤–∞—Ä—Ç–∏—Ä—ã?',
      '–ö–∞–∫ –æ—Ü–µ–Ω–∏—Ç—å —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—ã?',
      '–ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω—ã –¥–ª—è –ø–æ–∫—É–ø–∫–∏?',
      '–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å —Ö–æ—Ä–æ—à–∏–π —Ä–∞–π–æ–Ω –¥–ª—è –ø–æ–∫—É–ø–∫–∏?',
      '–°—Ç–æ–∏—Ç –ª–∏ –ø–æ–∫—É–ø–∞—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É –≤ –Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–µ?'
    ]
  },
  {
    category: '–î–∏–∑–∞–π–Ω –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞',
    icon: 'üé®',
    questions: [
      '–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —É—é—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—å–µ—Ä –≤ –º–∞–ª–µ–Ω—å–∫–æ–π –∫–≤–∞—Ä—Ç–∏—Ä–µ?',
      '–ö–∞–∫–∏–µ —Ü–≤–µ—Ç–∞ –≤—ã–±—Ä–∞—Ç—å –¥–ª—è —Å–ø–∞–ª—å–Ω–∏?',
      '–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—É–¥–∏—é?',
      '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã –≤ –¥–∏–∑–∞–π–Ω–µ –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞',
      '–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ?',
      '–ö–∞–∫—É—é –º–µ–±–µ–ª—å –≤—ã–±—Ä–∞—Ç—å –¥–ª—è –≥–æ—Å—Ç–∏–Ω–æ–π?'
    ]
  },
  {
    category: '–†–µ–º–æ–Ω—Ç –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ',
    icon: 'üî®',
    questions: [
      '–ö–∞–∫ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –±—é–¥–∂–µ—Ç –Ω–∞ —Ä–µ–º–æ–Ω—Ç?',
      '–° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å —Ä–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã?',
      '–ö–∞–∫–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ª—É—á—à–µ –≤—ã–±—Ä–∞—Ç—å?',
      '–ö–∞–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–∞–ø—ã —Ä–µ–º–æ–Ω—Ç–∞?',
      '–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–π–º–µ—Ç —Ä–µ–º–æ–Ω—Ç?',
      '–ö–∞–∫ –Ω–∞–π—Ç–∏ —Ö–æ—Ä–æ—à–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤?'
    ]
  },
  {
    category: '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏',
    icon: 'üí∞',
    questions: [
      '–°—Ç–æ–∏—Ç –ª–∏ –ø–æ–∫—É–ø–∞—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É –¥–ª—è —Å–¥–∞—á–∏ –≤ –∞—Ä–µ–Ω–¥—É?',
      '–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å —Ä–∞–π–æ–Ω—ã –¥–ª—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π?',
      '–ö–∞–∫–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –æ—Ç –∞—Ä–µ–Ω–¥—ã –∫–≤–∞—Ä—Ç–∏—Ä?',
      '–†–∏—Å–∫–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å',
      '–ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –æ–∫—É–ø–∞–µ–º–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π?',
      '–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è –∏–ª–∏ –∂–∏–ª–∞—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å?'
    ]
  },
  {
    category: '–ü—Ä–æ–¥–∞–∂–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏',
    icon: 'üìà',
    questions: [
      '–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—ã?',
      '–ö–∞–∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É –∫ –ø—Ä–æ–¥–∞–∂–µ?',
      '–ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω—ã –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏?',
      '–ö–∞–∫ –Ω–∞–π—Ç–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –±—ã—Å—Ç—Ä–æ?',
      '–°—Ç–æ–∏—Ç –ª–∏ –¥–µ–ª–∞—Ç—å —Ä–µ–º–æ–Ω—Ç –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∂–µ–π?',
      '–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ —Å–¥–µ–ª–∫—É?'
    ]
  }
]

/**
 * –ü–æ–ª—É—á–∏—Ç—å —Ä–æ–ª—å –ø–æ ID
 */
export function getRoleById(roleId: string): DomovenokRole | undefined {
  return DOMOVENOK_ROLES.find(role => role.id === roleId)
}

/**
 * –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∏–ª—å –ø–æ ID
 */
export function getStyleById(styleId: string): DomovenokStyle | undefined {
  return COMMUNICATION_STYLES.find(style => style.id === styleId)
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
 */
export function formatMessage(content: string): string {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ markdown-–ø–æ–¥–æ–±–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  return content
    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
    .replace(/\*(.*?)\*/g, '<em>$1</em>')
    .replace(/`(.*?)`/g, '<code>$1</code>')
    .replace(/\n/g, '<br>')
}

/**
 * –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
 */
export function getWelcomeMessage(roleName: string = '–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç'): string {
  return `–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç **–î–æ–º–æ–≤—ë–Ω–æ–∫** üè†‚ú® 

–Ø –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π AI-–ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –∏ –¥–∏–∑–∞–π–Ω—É –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞! 
–°–µ–≥–æ–¥–Ω—è —Ä–∞–±–æ—Ç–∞—é –≤ —Ä–æ–ª–∏: **${roleName}**

**–ö–∞–∫ —è –º–æ–≥—É –ø–æ–º–æ—á—å:**
üè† **–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏** - –ø–æ–∫—É–ø–∫–∞, –ø—Ä–æ–¥–∞–∂–∞, –æ—Ü–µ–Ω–∫–∞
üé® **–î–∏–∑–∞–π–Ω –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞** - –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∞, —Å—Ç–∏–ª–∏, —Ü–≤–µ—Ç–∞, –º–µ–±–µ–ª—å  
üî® **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–º–æ–Ω—Ç–∞** - –±—é–¥–∂–µ—Ç, —ç—Ç–∞–ø—ã, –º–∞—Ç–µ—Ä–∏–∞–ª—ã
üí∞ **–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–≤–µ—Ç—ã** - –∞–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞, –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å

–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –Ω–∏–∂–µ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–¥–∞–π—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å! üëá`
}

/**
 * –ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—á–∏—Å—Ç–∫–µ —á–∞—Ç–∞
 */
export function getClearChatMessage(): string {
  return `–ß–∞—Ç –æ—á–∏—â–µ–Ω! –ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å –≤–∞–º —Å–Ω–æ–≤–∞ üè†‚ú®

–ó–∞–¥–∞–π—Ç–µ –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å –ø–æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –∏–ª–∏ –¥–∏–∑–∞–π–Ω—É –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞!`
}

/**
 * –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
 */
export function validateMessage(message: string): { isValid: boolean; error?: string } {
  if (!message || message.trim().length === 0) {
    return { isValid: false, error: '–°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º' }
  }
  
  if (message.length > 4000) {
    return { isValid: false, error: '–°–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ (–º–∞–∫—Å–∏–º—É–º 4000 —Å–∏–º–≤–æ–ª–æ–≤)' }
  }
  
  return { isValid: true }
}

/**
 * –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è
 */
export function getMessageStats(message: string): {
  characters: number
  words: number
  estimatedTokens: number
} {
  const characters = message.length
  const words = message.trim().split(/\s+/).length
  const estimatedTokens = Math.ceil(characters / 4) // –ü—Ä–∏–º–µ—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
  
  return { characters, words, estimatedTokens }
}

/**
 * –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è
 */
export function generateMessageId(): string {
  return `msg_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è
 */
export function formatTime(date: Date): string {
  return date.toLocaleTimeString('ru-RU', { 
    hour: '2-digit', 
    minute: '2-digit' 
  })
}

/**
 * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–æ–ø—Ä–æ—Å–æ–º
 */
export function isQuestion(message: string): boolean {
  const questionWords = ['–∫–∞–∫', '—á—Ç–æ', '–≥–¥–µ', '–∫–æ–≥–¥–∞', '–ø–æ—á–µ–º—É', '–∑–∞—á–µ–º', '—Å–∫–æ–ª—å–∫–æ', '–∫–∞–∫–æ–π', '–∫–∞–∫–∞—è', '–∫–∞–∫–æ–µ', '–∫–∞–∫–∏–µ']
  const lowerMessage = message.toLowerCase()
  
  return questionWords.some(word => lowerMessage.includes(word)) || 
         message.includes('?') ||
         lowerMessage.startsWith('–º–æ–∂–Ω–æ –ª–∏') ||
         lowerMessage.startsWith('—Å—Ç–æ–∏—Ç –ª–∏')
}

/**
 * –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
 */
export function detectTopic(message: string): string {
  const lowerMessage = message.toLowerCase()
  
  const topics = {
    '–ø–æ–∫—É–ø–∫–∞': ['–∫—É–ø–∏—Ç—å', '–ø–æ–∫—É–ø–∫–∞', '–ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏', '–≤—ã–±—Ä–∞—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É'],
    '–ø—Ä–æ–¥–∞–∂–∞': ['–ø—Ä–æ–¥–∞—Ç—å', '–ø—Ä–æ–¥–∞–∂–∞', '—Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å'],
    '–¥–∏–∑–∞–π–Ω': ['–¥–∏–∑–∞–π–Ω', '–∏–Ω—Ç–µ—Ä—å–µ—Ä', '—Ü–≤–µ—Ç', '–º–µ–±–µ–ª—å', '–ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∞'],
    '—Ä–µ–º–æ–Ω—Ç': ['—Ä–µ–º–æ–Ω—Ç', '–æ—Ç–¥–µ–ª–∫–∞', '–º–∞—Ç–µ—Ä–∏–∞–ª—ã', '—Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ'],
    '–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏': ['–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏', '–¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å', '–∞—Ä–µ–Ω–¥–∞', '—Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å'],
    '–¥–æ–∫—É–º–µ–Ω—Ç—ã': ['–¥–æ–∫—É–º–µ–Ω—Ç—ã', '–¥–æ–≥–æ–≤–æ—Ä', '—Å–¥–µ–ª–∫–∞', '–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ']
  }
  
  for (const [topic, keywords] of Object.entries(topics)) {
    if (keywords.some(keyword => lowerMessage.includes(keyword))) {
      return topic
    }
  }
  
  return '–æ–±—â–∏–µ'
}

export default {
  DOMOVENOK_ROLES,
  COMMUNICATION_STYLES,
  QUICK_QUESTIONS,
  getRoleById,
  getStyleById,
  formatMessage,
  getWelcomeMessage,
  getClearChatMessage,
  validateMessage,
  getMessageStats,
  generateMessageId,
  formatTime,
  isQuestion,
  detectTopic
} 